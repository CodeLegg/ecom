{% extends 'base.html' %} {% load static %} {% block content %}
<main>
	<div class="collection-title">
		<h1>{{ collection.name }}</h1>
	</div>

	<section class="collection-detail">
		
    <!-- Your collection detail template -->
    <div class="collection-message" id="collection-message">
    <!-- The message will be dynamically inserted here -->
    </div>

		<div class="products-grid">
			{% for product in products %}
			<div class="product-card">
				<a href="{% url 'product' product.id %}">
					{% if product.image %}
					<img
						src="{{ product.image.url }}"
						alt="{{ product.name }}"
						class="collection-detail-image"
					/>
					{% endif %}
					<h2>{{ product.name }}</h2>
					<p>{{ product.description }}</p>
					<p>Price: ${{ product.price }}</p>
					<button>View Product</button>
				</a>
			</div>
			{% empty %}
			<p>No products available in this collection.</p>
			{% endfor %}
		</div>
	</section>
</main>

<script>
    // Pass the collection name or slug from Django to JavaScript
    const currentCollection = "{{ collection.slug|escapejs }}";  // Or use `collection.slug`
</script>

<!-- Include your external JavaScript file to handle message rendering -->
<script src="{% static 'assets/js/collection-messages.js' %}"></script>

{% endblock %}
